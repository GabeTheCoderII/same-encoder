<html>
  <head>
    <title>SAME encoder client-side demo</title>
    <!--
        the browser bundles can be found in the repo's /bundle
        directory; this example assumes they've been copied or symlinked
        to js/lib/
      -->
    <script src="js/lib/SAME.js"></script>
    <script src="js/lib/Writer.js"></script>
    <script type="text/javascript">
      var SAME = window.SAME;
      var Writer = window.Writer;
      
      var message = {
        originator: 'PEP',
        code: 'EAN',
        region: {
          subdiv: '0',
          stateCode: '00',
          countyCode: '000'
        },
        length: 600,
        start: {
          day: 123,
          hour: 5,
          minute: 30
        },
        sender: 'WHITEHSE'
      };

      document.addEventListener('DOMContentLoaded', function() {
        document.querySelector('pre#obj').innerHTML =
          JSON.stringify(message, false, 2);
      
        var player = Writer.write(SAME.encode(message), 'div#player');

        document.querySelector('a#wav')
          .href = player.querySelector('source').src;
      });
    </script>
  </head>
  <body>
    <h2>Minimal demo of isomorphic SAME encoder</h2>

    <h3>What? Where? Why? How?
      <a href="https://github.com/aaron-em/same-encoder">Here</a>.
    </h3>
    
    <p>Message object</p>
    <pre id="obj"> </pre>

    <p>Audio player</p>
    <div id="player"></div>

    <p>Wave file link</p>
    <a id="wav" href="" download="output.wav">output.wav</a>
  </body>
</html>
